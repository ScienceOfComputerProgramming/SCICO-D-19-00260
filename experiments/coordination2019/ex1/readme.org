# -*- org-confirm-babel-evaluate: nil; -*-

* Choreography
  Participant *a* decides which branch is taken and informs
  either *b* or *c*, which in turn notifies the third
  participant.

#+begin_src python :session coordination :results output replace drawer :hlines yes
gr1 = nx.DiGraph()
abx = add_pair(gr1, "a", "b", 1, "x")
bcz = add_pair(gr1, "b", "c", 2, "z")
gr1.add_edge(abx[1], bcz[0])

gr2 = nx.DiGraph()
acy = add_pair(gr2, "a", "c", 1, "y")
cbw = add_pair(gr2, "c", "b", 2, "w")
gr2.add_edge(acy[1], cbw[0])
global_view = [gr1, gr2]
debug_graphs(global_view, "test-coordination/global-view")
#+end_src

#+RESULTS:
:RESULTS:
Pomset 1
[[file:test-coordination/global-view/graph-0.png]]

Pomset 2
[[file:test-coordination/global-view/graph-1.png]]
:END:


* CC2
#+begin_src python :session coordination
cc2c = cc2closure(global_view)
cc2test(global_view, cc2c)
#+end_src

#+RESULTS:
| Graph | Match |
|     1 |     1 |
|     2 |     2 |




* CC3
#+begin_src python :session coordination
(cc3c, prefixes) = cc3closure(global_view)
cc3test(prefixes, cc3c)
#+end_src

#+RESULTS:
| Graph | Match |
|     1 |     1 |
|     2 |     2 |
|     3 |     3 |
|     4 |     4 |
|     5 |     5 |
|     6 |     6 |
|     7 |     7 |
|     8 |     8 |
|     9 |     9 |




